training:

1.输入图像集合，以下对每一张图片操作；

2.通过深度网络中的卷积层（VGG、Alexnet、Resnet等中的卷积层）对图像进行特征提取，得到图片的feature map；

3.通过selective search得到图像的感兴趣区域（通常取2000个），2000 × （x,y,w,h）；

4.对得到的感兴趣区域进行ROI pooling（感兴趣区域池化）：即通过坐标投影的方法，在特征图上得到输入图像中的感兴趣区域对应的特征区域，并对该区域进行最大值池化，这样就得到了感兴趣区域的特征，并且统一了特征大小，如下图所示；

![](/assets/3.3.3 ROI.png)

5.对ROI pooling层的输出（及感兴趣区域对应的特征图最大值池化后的特征）作为每个感兴趣区域的特征向量；

6.将感兴趣区域的特征向量与全连接层相连，并定义了多任务损失函数，分别与softmax分类器和boxbounding回归器相连，分别得到当前感兴趣区域的类别及坐标包围框；

7.对所有得到的包围框进行非极大值抑制（NMS），得到最终的检测结果。

